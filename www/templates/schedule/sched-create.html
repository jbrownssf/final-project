<ion-view view-title="Add Schedule">
    <!-- Include ion-nav-buttons in every index to avoid breaking the app (ionic material bug) -->
    <ion-nav-buttons></ion-nav-buttons> 
    <ion-content>
        <div class="list">
            <form name="scheduleForm" ng-submit="handleForm(scheduleForm)">
                <label class="item item-input"><!-- ng-class="{ 'has-errors' : loginForm.email.$invalid && loginForm.$submitted}"> -->
                  <input type="date" ng-model="schedule.assignedDate" required>
                </label>
                <label class="item item-input item-stacked-label">
                  <span class="input-label">Message</span>
                  <input type="string" name="note" ng-model="schedule.note" placeholder="Message to others.">
                </label>
                <div class="card" ng-repeat="section in schedule.schedule track by $index">
                    <div class="item item-divider item-icon-right">
                        <label class="item item-input">
                          <input type="text" ng-model="section[0]" placeholder="Section Name" required>
                        </label>
                    </div>
                    <div class="item row" ng-repeat="spot in section[1] track by $index" ng-click="assignPosition($event, [$parent.$index, $index])">
                        <div class="col col-25">
                            {{spot[0]}}
                        </div>
                        <div class="col">
                            {{spot[1] | date: "h:mm a"}}
                        </div>
                        <div class="col col-33">
                            {{who(spot[3]).firstName}} {{who(spot[3]).lastName}}
                        </div>
                    </div>
                    <div class="item" ng-click="addSpot($event, [$index])">
                        <strong>Add a Position</strong>
                    </div>
                </div>
                <div class="card">
                    <div class="item" ng-click="addSection()">
                        <strong>Add a Section</strong>
                    </div>
                </div>
                <div class="padding">
                    <button class="button button-block button-calm ssf-button" type="submit" ng-click="submitType(scheduleForm, 'saved')">
                        Save
                    </button>
                    <button class="button button-block button-calm ssf-button" type="submit" ng-click="submitType(scheduleForm, 'published')">
                        Publish
                    </button>
                    <button class="button button-block button-calm ssf-button-inverted" type="submit" ng-click="submitType(scheduleForm, 'deleted')">
                        Delete
                    </button>
                </div>
            </form>
        </div>
    </ion-content>
</ion-view>